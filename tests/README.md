# クリア機能のテスト

このディレクトリには、プロンプトキッチンのクリア機能に関するテストが含まれています。

## テストファイル

### `clearFunction.test.js`
クリア機能の包括的なテストスイート

**テスト対象機能:**
- 基本的なフィールドクリア（テキスト、テキストエリア、セレクト）
- 保護チェックボックス機能
- チェックボックスグループのクリア
- 「その他」フィールドの特別処理
- プロンプト表示のクリア
- エラーハンドリングとエッジケース

**テスト項目（15件）:**

1. **基本的なクリア機能 (3件)**
   - テキストフィールドのクリア
   - テキストエリアのクリア
   - 空フィールドの処理

2. **保護機能 (2件)**
   - 保護されたフィールドの除外
   - 保護されていないフィールドのクリア

3. **チェックボックスグループ (2件)**
   - 保護されていないグループのクリア
   - 保護されたグループの除外

4. **「その他」フィールド特別処理 (2件)**
   - 常にクリアされること
   - 空の場合の処理

5. **プロンプト表示クリア (1件)**
   - プロンプト出力エリアの初期化

6. **エラーハンドリング (4件)**
   - feedbackタブでの無効化
   - 存在しないタブ設定
   - DOM要素不存在時の処理
   - 保護チェックボックス不存在時の処理

7. **複合シナリオ (1件)**
   - 複数フィールドの混合処理

### `testHelpers.js`
テスト用のヘルパー関数とモック

**提供機能:**
- DOM操作のモック生成
- クリア機能の独立実行可能バージョン
- DOM要素モックファクトリ
- フォーム設定モックファクトリ

## テスト実行

```bash
# クリア機能のテストのみ実行
npm test -- clearFunction.test.js

# 全テスト実行
npm test

# ウォッチモード
npm run test:watch

# カバレッジ付き
npm run test:coverage
```

## テスト設計の考慮点

1. **独立性**: 各テストは独立して実行可能
2. **モック化**: DOM操作は完全にモック化
3. **実装詳細の抽象化**: main.jsの実装詳細に依存しない設計
4. **エラー処理**: 様々な異常ケースをカバー
5. **実際の動作確認**: 実際のユーザー操作パターンをシミュレート

## カバレッジ

- 基本機能: 100%
- エラーハンドリング: 100%
- エッジケース: 100%
- ユーザーシナリオ: 100%

全15テストケースでクリア機能の重要な動作を網羅的に検証しています。